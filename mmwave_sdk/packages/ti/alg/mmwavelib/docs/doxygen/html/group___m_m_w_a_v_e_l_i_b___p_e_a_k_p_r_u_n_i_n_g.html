<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Cfar peak outputs group/pruning Algorithm</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Cfar peak outputs group/pruning Algorithm</div>  </div>
</div><!--header-->
<div class="contents">

<p>Cfar peak group/pruning Algorithm.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga22c2fd8cfd10215698bdbed42166f363"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_w_a_v_e_l_i_b___p_e_a_k_p_r_u_n_i_n_g.html#ga22c2fd8cfd10215698bdbed42166f363">mmwavelib_cfarPeakPruning</a> (uint16_t *grpPeakIdx, uint16_t *peakRangeIdx, uint16_t *peakDopplerIdx, uint32_t numDetectedObjects, uint16_t *detMatrix, uint32_t numDopplerBins, uint32_t maxRangeIdx, uint32_t minRangeIdx, uint32_t groupInDopplerDirection, uint32_t groupInRangeDirection, uint32_t maxNumDetObjs)</td></tr>
<tr class="memdesc:ga22c2fd8cfd10215698bdbed42166f363"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Name : mmwavelib_cfarPeakPruning.  <a href="#ga22c2fd8cfd10215698bdbed42166f363">More...</a><br /></td></tr>
<tr class="separator:ga22c2fd8cfd10215698bdbed42166f363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4aa1fa817dcdca1eb8e7b088203de427"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_w_a_v_e_l_i_b___p_e_a_k_p_r_u_n_i_n_g.html#ga4aa1fa817dcdca1eb8e7b088203de427">mmwavelib_cfarPeakQualifiedInOrderPruning</a> (uint16_t *restrict grpPeakIdx, uint16_t *restrict peakRangeIdx, uint16_t *restrict peakDopplerIdx, uint16_t *restrict peakValue, uint32_t numDetectedObjects, uint32_t numDopplerBins, uint32_t maxRangeIdx, uint32_t minRangeIdx, uint32_t groupInDopplerDirection, uint32_t groupInRangeDirection, uint32_t maxNumDetObjs)</td></tr>
<tr class="memdesc:ga4aa1fa817dcdca1eb8e7b088203de427"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Name : mmwavelib_cfarPeakQualifiedInOrderPruning.  <a href="#ga4aa1fa817dcdca1eb8e7b088203de427">More...</a><br /></td></tr>
<tr class="separator:ga4aa1fa817dcdca1eb8e7b088203de427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24b809aa39bf9f192c02f6d30b7f300a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_w_a_v_e_l_i_b___p_e_a_k_p_r_u_n_i_n_g.html#ga24b809aa39bf9f192c02f6d30b7f300a">mmwavelib_cfarPeakQualifiedPruning</a> (uint16_t *grpPeakIdx, uint16_t *peakRangeIdx, uint16_t *peakDopplerIdx, uint16_t *peakValue, uint32_t numDetectedObjects, uint32_t numDopplerBins, uint32_t maxRangeIdx, uint32_t minRangeIdx, uint32_t groupInDopplerDirection, uint32_t groupInRangeDirection, uint32_t maxNumDetObjs)</td></tr>
<tr class="memdesc:ga24b809aa39bf9f192c02f6d30b7f300a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Name : mmwavelib_cfarPeakQualifiedPruning.  <a href="#ga24b809aa39bf9f192c02f6d30b7f300a">More...</a><br /></td></tr>
<tr class="separator:ga24b809aa39bf9f192c02f6d30b7f300a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Cfar peak group/pruning Algorithm. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga22c2fd8cfd10215698bdbed42166f363"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mmwavelib_cfarPeakPruning </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>grpPeakIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>peakRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>peakDopplerIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numDetectedObjects</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>detMatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numDopplerBins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>minRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>groupInDopplerDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>groupInRangeDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxNumDetObjs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Name : mmwavelib_cfarPeakPruning. </p>
<hr/>
 <dl class="section user"><dt></dt><dd><b>Description</b> : The function groups neighboring peaks into one. The grouping is done according to two input flags: groupInRangeDirection and groupInDopplerDirection. For each detected peak the function checks if the peak is greater than its neighbors. If this is true, the peak is copied to the output list of detected objects. The neighboring peaks that are used for checking are taken from the detection matrix and copied into 3x3 kernel regardless of whether they are CFAR detected or not. Note: Function always reads 9 samples per detected object from L3 memory into local array tempBuff, but it only needs to read according to input flags. For example if only the groupInDopplerDirection flag is set, it only needs to read middle row of the kernel, i.e. 3 samples per target from detection matrix.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">grpPeakIdx</td><td>Output array with indices of detected objects after peak pruning </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakRangeIdx</td><td>Array of detected objects range index after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakDopplerIdx</td><td>Array of detected objects Doppler index after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numDetectedObjects</td><td>Number of detected objects by CFAR </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">detMatrix</td><td>Detection Range/Doppler matrix </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numDopplerBins</td><td>Number of Doppler bins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxRangeIdx</td><td>Maximum range limit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minRangeIdx</td><td>Minimum range limit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">groupInDopplerDirection</td><td>Flag enables grouping in Doppler direction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">groupInRangeDirection</td><td>Flag enables grouping in Range direction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxNumDetObjs</td><td>maximum number of grouped objects</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of detected objects after grouping</dd></dl>
<p>cycles cgt: 8.1.3 both direction: 0.27*numDetectedObjects*numDetectedObjects + 39.5*numDetectedObjects + 344 Doppler direction : 41 * numDetectedObjects + 90 range direction: 0.22*numDetectedObjects*numDetectedObjects + 31*numDetectedObjects + 232 </p>

</div>
</div>
<a class="anchor" id="ga4aa1fa817dcdca1eb8e7b088203de427"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mmwavelib_cfarPeakQualifiedInOrderPruning </td>
          <td>(</td>
          <td class="paramtype">uint16_t *restrict&#160;</td>
          <td class="paramname"><em>grpPeakIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *restrict&#160;</td>
          <td class="paramname"><em>peakRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *restrict&#160;</td>
          <td class="paramname"><em>peakDopplerIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *restrict&#160;</td>
          <td class="paramname"><em>peakValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numDetectedObjects</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numDopplerBins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>minRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>groupInDopplerDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>groupInRangeDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxNumDetObjs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Name : mmwavelib_cfarPeakQualifiedInOrderPruning. </p>
<hr/>
 <dl class="section user"><dt></dt><dd><b>Description</b> : The function groups neighboring peaks into one. The grouping is done according to two input flags: groupInRangeDirection and groupInDopplerDirection. For each detected peak the function checks if the peak is greater than its neighbors. If this is true, the peak is copied to the output list of detected objects. The neighboring peaks that are used for checking are taken from the list of CFAR detected objects, (not from the detection matrix), and copied into 3x3 kernel that has been initialized to zero for each peak under test. If the neighboring cell has not been detected by CFAR, its peak value is not copied into the kernel. Note: Function always search for 8 peaks in the list, but it only needs to search according to input flags.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">grpPeakIdx</td><td>Output array with indices of detected objects after peak pruning </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakRangeIdx</td><td>Array of range index for the detected objects after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakDopplerIdx</td><td>Array of doppler index for the detected objects after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakValue</td><td>Array of power values for the detected objects after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numDetectedObjects</td><td>Number of detected objects by CFAR </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numDopplerBins</td><td>Number of Doppler bins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxRangeIdx</td><td>Maximum range limit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minRangeIdx</td><td>Minimum range limit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">groupInDopplerDirection</td><td>Flag enables grouping in Doppler direction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">groupInRangeDirection</td><td>Flag enables grouping in Range direction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxNumDetObjs</td><td>maximum number of grouped peaks</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>the cfar output peaks must be in the orders as ascending Doppler bin first, the ascend range bin</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Number of detected objects after peak pruning</dd></dl>
<p>cycles cgt: 8.1.3 both directions: ~296*numDetectedObjects Doppler Direction: ~271*numDetectedObjects Range direction: 55.4* numDetectedObjects + 28 </p>

</div>
</div>
<a class="anchor" id="ga24b809aa39bf9f192c02f6d30b7f300a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mmwavelib_cfarPeakQualifiedPruning </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>grpPeakIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>peakRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>peakDopplerIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>peakValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numDetectedObjects</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numDopplerBins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>minRangeIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>groupInDopplerDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>groupInRangeDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxNumDetObjs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Name : mmwavelib_cfarPeakQualifiedPruning. </p>
<hr/>
<p> The function implements the same peak pruning algorithm as mmwavelib_cfarPeakQualifiedInOrderPruning, but with no assumption for the order of cfar detected peaks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">grpPeakIdx</td><td>Output array with indices of detected objects after peak pruning </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakRangeIdx</td><td>Array of range index for the detected objects after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakDopplerIdx</td><td>Array of doppler index for the detected objects after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peakValue</td><td>Array of power values for the detected objects after CFAR detection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numDetectedObjects</td><td>Number of detected objects by CFAR </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numDopplerBins</td><td>Number of Doppler bins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxRangeIdx</td><td>Maximum range limit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minRangeIdx</td><td>Minimum range limit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">groupInDopplerDirection</td><td>Flag enables grouping in Doppler direction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">groupInRangeDirection</td><td>Flag enables grouping in Range direction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxNumDetObjs</td><td>maximum number of grouped peaks</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of detected objects after grouping</dd></dl>
<ul>
<li>cycles cgt: 8.1.3 both directions: 4*numDetectedObjects*numDetectedObjects + 77*numDetectedObjects + 57 Doppler direction: 2.5*numDetectedObjects*numDetectedObjects + 69*numDetectedObjects + 52 Range direction: 2.5*numDetectedObjects*numDetectedObjects + 71*numDetectedObjects + 59 </li>
</ul>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
