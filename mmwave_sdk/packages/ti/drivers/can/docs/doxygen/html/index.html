<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CAN Driver</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CAN Driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The CAN driver provides functionality of transferring data between CAN peripherals. This driver does not interpret any of the data sent to or received from using this peripheral.</p>
<p>The CAN header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="can_8h.html">ti/drivers/can/can.h</a>&gt;</span></div></div><!-- fragment --><h2>Initializing the driver</h2>
<p>The CAN Driver needs to be initialized once across the System. This is done using the <a class="el" href="group___c_a_n___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga19a1493cc3349a6c698482cbb8fa13a9">CAN_init</a>. None of the CAN API's can be used without invoking this API.</p>
<p>Once the CAN Driver has been initialized; the bit timing can be configured using <a class="el" href="group___c_a_n___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#gaf353b23b95d501fb260c264f5a076235">CAN_configBitTime</a>. This APIs can be called multiple times to reconfigure bit timings.</p>
<h2>Creating the message objects</h2>
<p>Message objects are used to transmit or receive data over the CAN peripheral. A message object is created using <a class="el" href="group___c_a_n___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga6260ca0a65cbb39b2f6beff9b82c82aa">CAN_createMsgObject</a>. The attributes of a message object can be reconfigured.</p>
<h2>Sending and receiving data</h2>
<p>Data is transmitted using the <a class="el" href="group___c_a_n___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga3367831f96ae786694173b84afd849ef">CAN_transmitData</a>. The application can choose to receive a transmit complete interrupt by enabling the interrupt intEnable field and registering a callback function appCallBack when creating the transmit message object.</p>
<p>If the receive interrupts are enabled using intEnable field and a callback function appCallBack has been registered when creating the receive message object, the driver notifies the application when the data has arrived. The application needs to call the <a class="el" href="group___c_a_n___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga9538aa358c11e31ef963919c59385d7e">CAN_getData</a> function to read the received data.</p>
<h2>Error and status handling</h2>
<p>The application can monitor the parity error, Bus off error and Error warning limits by enabling the error interrupts. The application can monitor the Wakeup Pending and LEC by enabling the status interrupts. The driver will call the registered callback function to indicate which error and status fields caused the interrupt. It is up to the application to take appropriate action.</p>
<h2>Get/Set Options</h2>
<p>Helper APIs to get and set various statistics, error counters, ECC diagnostics, power down have been provided. Refer to <a class="el" href="group___c_a_n___d_r_i_v_e_r___e_x_t_e_r_n_a_l___d_a_t_a___s_t_r_u_c_t_u_r_e.html#gab6b1424d4b09636c59d8b0f5106400b2" title="This enumeration defines the values used to represent the GET/SET options. ">CAN_Option</a> for more information.</p>
<h2>Limitation</h2>
<p>The CAN driver does not support the DMA or fifo mode.</p>
<p>The <a class="el" href="hw__dcan_8h.html" title="The file contains the DCAN register definitions. ">can/include/hw_dcan.h</a> has the register layer definitons for the DCAN controller module. </p>
</div></div><!-- contents -->
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
