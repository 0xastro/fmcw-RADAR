<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>I2C Driver External Functions</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">I2C Driver External Functions<div class="ingroups"><a class="el" href="group___i2_c___d_r_i_v_e_r.html">I2C Master Driver</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The section has a list of all the exported API which the applications need to invoke in order to use the I2C driver.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8cad0c04a9eca0fffc0ffe5586a5179b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga8cad0c04a9eca0fffc0ffe5586a5179b">I2C_cancel</a> (<a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a> handle)</td></tr>
<tr class="memdesc:ga8cad0c04a9eca0fffc0ffe5586a5179b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel all I2C transfers.  <a href="#ga8cad0c04a9eca0fffc0ffe5586a5179b">More...</a><br /></td></tr>
<tr class="separator:ga8cad0c04a9eca0fffc0ffe5586a5179b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12c86d89a687f2ee1eb980d99c32326d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga12c86d89a687f2ee1eb980d99c32326d">I2C_close</a> (<a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a> handle)</td></tr>
<tr class="memdesc:ga12c86d89a687f2ee1eb980d99c32326d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an I2C peripheral specified by an I2C handle.  <a href="#ga12c86d89a687f2ee1eb980d99c32326d">More...</a><br /></td></tr>
<tr class="separator:ga12c86d89a687f2ee1eb980d99c32326d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc0c90b26bbf09e3b1b67cbf28dcd515"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#gabc0c90b26bbf09e3b1b67cbf28dcd515">I2C_control</a> (<a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a> handle, uint32_t cmd, void *arg)</td></tr>
<tr class="memdesc:gabc0c90b26bbf09e3b1b67cbf28dcd515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform implementation specific features on a given I2C_Handle.  <a href="#gabc0c90b26bbf09e3b1b67cbf28dcd515">More...</a><br /></td></tr>
<tr class="separator:gabc0c90b26bbf09e3b1b67cbf28dcd515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ff51ddf1d325776fef90cce0223772b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga9ff51ddf1d325776fef90cce0223772b">I2C_init</a> (void)</td></tr>
<tr class="memdesc:ga9ff51ddf1d325776fef90cce0223772b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the I2C module.  <a href="#ga9ff51ddf1d325776fef90cce0223772b">More...</a><br /></td></tr>
<tr class="separator:ga9ff51ddf1d325776fef90cce0223772b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0946727c70387460b4205187afe7fb7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f">I2C_open</a> (uint32_t index, <a class="el" href="_i2_c_8h.html#a4173f2dd1ab66ef95cb2b15a5865bb85">I2C_Params</a> *params)</td></tr>
<tr class="memdesc:ga0946727c70387460b4205187afe7fb7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a given I2C peripheral specified by the particular index value. The parameter specifies which mode the I2C will operate.  <a href="#ga0946727c70387460b4205187afe7fb7f">More...</a><br /></td></tr>
<tr class="separator:ga0946727c70387460b4205187afe7fb7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab11636302074d67180207ab81ceb323c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#gab11636302074d67180207ab81ceb323c">I2C_Params_init</a> (<a class="el" href="_i2_c_8h.html#a4173f2dd1ab66ef95cb2b15a5865bb85">I2C_Params</a> *params)</td></tr>
<tr class="memdesc:gab11636302074d67180207ab81ceb323c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an I2C_Params struct to its defaults.  <a href="#gab11636302074d67180207ab81ceb323c">More...</a><br /></td></tr>
<tr class="separator:gab11636302074d67180207ab81ceb323c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5d827b67fe77d7d179026941cc069d7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#gac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a> (<a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a> handle, <a class="el" href="_i2_c_8h.html#a285a6ca3e8eed9d170c9575a3ce2552b">I2C_Transaction</a> *transaction)</td></tr>
<tr class="memdesc:gac5d827b67fe77d7d179026941cc069d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an I2C transaction with an I2C slave peripheral.  <a href="#gac5d827b67fe77d7d179026941cc069d7">More...</a><br /></td></tr>
<tr class="separator:gac5d827b67fe77d7d179026941cc069d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The section has a list of all the exported API which the applications need to invoke in order to use the I2C driver. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8cad0c04a9eca0fffc0ffe5586a5179b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel all I2C transfers. </p>
<dl class="section pre"><dt>Precondition</dt><dd>I2C_Transfer() has been called.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>An I2C_Handle returned from I2C_open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga12c86d89a687f2ee1eb980d99c32326d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close an I2C peripheral specified by an I2C handle. </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f" title="Initialize a given I2C peripheral specified by the particular index value. The parameter specifies wh...">I2C_open()</a> has been called.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A I2C_Handle returned from I2C_open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f" title="Initialize a given I2C peripheral specified by the particular index value. The parameter specifies wh...">I2C_open()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gabc0c90b26bbf09e3b1b67cbf28dcd515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t I2C_control </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform implementation specific features on a given I2C_Handle. </p>
<p>Commands for I2C_control can originate from <a class="el" href="_i2_c_8h.html" title="This is the header file for the I2C master driver which exposes the data structures and exported API ...">I2C.h</a> or from implementation specific I2C*.h (<em>I2CCC26XX.h</em>, <em>I2CTiva.h</em>, etc.. ) files. While commands from <a class="el" href="_i2_c_8h.html" title="This is the header file for the I2C master driver which exposes the data structures and exported API ...">I2C.h</a> are API portable across driver implementations, not all implementations may support all these commands. Conversely, commands from driver implementation specific I2C*.h files add unique driver capabilities but are not API portable across all I2C driver implementations.</p>
<p>Commands supported by <a class="el" href="_i2_c_8h.html" title="This is the header file for the I2C master driver which exposes the data structures and exported API ...">I2C.h</a> follow a I2C_CMD_&lt;cmd&gt; naming convention.<br />
 Commands supported by I2C*.h follow a I2C*_CMD_&lt;cmd&gt; naming convention.<br />
 Each control command defines <b>arg</b> differently. The types of <b>arg</b> are documented with each command.</p>
<p>See <a class="el" href="group___i2_c___c_m_d.html">I2C_control command codes</a> for command codes.</p>
<p>See <a class="el" href="group___i2_c___d_r_i_v_e_r___e_r_r_o_r___c_o_d_e.html">I2C_control return status codes</a> for status codes.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f" title="Initialize a given I2C peripheral specified by the particular index value. The parameter specifies wh...">I2C_open()</a> has to be called first.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A I2C handle returned from <a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f" title="Initialize a given I2C peripheral specified by the particular index value. The parameter specifies wh...">I2C_open()</a></td></tr>
    <tr><td class="paramname">cmd</td><td><a class="el" href="_i2_c_8h.html" title="This is the header file for the I2C master driver which exposes the data structures and exported API ...">I2C.h</a> or I2C*.h command.</td></tr>
    <tr><td class="paramname">arg</td><td>An optional R/W (read/write) command argument accompanied with cmd</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Implementation specific return codes. Negative values indicate unsuccessful operations.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f" title="Initialize a given I2C peripheral specified by the particular index value. The parameter specifies wh...">I2C_open()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga9ff51ddf1d325776fef90cce0223772b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the I2C module. </p>
<dl class="section pre"><dt>Precondition</dt><dd>The I2C_config structure must exist and be persistent before this function can be called. This function must also be called before any other I2C driver APIs. This function call does not modify any peripheral registers. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0946727c70387460b4205187afe7fb7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a> I2C_open </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#a4173f2dd1ab66ef95cb2b15a5865bb85">I2C_Params</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a given I2C peripheral specified by the particular index value. The parameter specifies which mode the I2C will operate. </p>
<dl class="section pre"><dt>Precondition</dt><dd>I2C controller has been initialized</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Logical peripheral number for the I2C indexed into the I2C_config table</td></tr>
    <tr><td class="paramname">params</td><td>Pointer to a parameter block. Default values will be used if NULL is specified. All the fields in this structure are are considered RO (read-only).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A I2C_Handle on success or a NULL on an error or if it has been opened already.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga9ff51ddf1d325776fef90cce0223772b" title="Initializes the I2C module. ">I2C_init()</a> </dd>
<dd>
<a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga12c86d89a687f2ee1eb980d99c32326d" title="Close an I2C peripheral specified by an I2C handle. ">I2C_close()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gab11636302074d67180207ab81ceb323c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_Params_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#a4173f2dd1ab66ef95cb2b15a5865bb85">I2C_Params</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an I2C_Params struct to its defaults. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>A pointer to I2C_Params structure for initialization</td></tr>
  </table>
  </dd>
</dl>
<p>Defaults values are: transferMode = I2C_MODE_BLOCKING transferCallbackFxn = NULL bitRate = I2C_100kHz </p>

</div>
</div>
<a class="anchor" id="gac5d827b67fe77d7d179026941cc069d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool I2C_transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#ae06fd2bf0081f98d815dce4223ebab7e">I2C_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_i2_c_8h.html#a285a6ca3e8eed9d170c9575a3ce2552b">I2C_Transaction</a> *&#160;</td>
          <td class="paramname"><em>transaction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform an I2C transaction with an I2C slave peripheral. </p>
<p>This function will start an I2C transfer and can only be called from a Task context when in I2C_MODE_BLOCKING. The I2C transfer procedure starts with evaluating how many bytes are to be written and how many are to be read from the I2C peripheral. Any data to be written will always be sent before any data is read.</p>
<p>The data written to the peripheral is preceded with the peripheral's 7-bit I2C slave address (with the Write bit set). After all the data has been transmitted, the driver will evaluate if any data needs to be read from the device. If so, a Re-START bit is sent, along with the same 7-bit I2C slave address (with the Read bit). Else, the transfer is concluded with a STOP bit. After the specified number of bytes have been read by the I2C, the transfer is ended with a NACK and STOP bit.</p>
<p>In I2C_MODE_BLOCKING, the I2C_transfer will block task execution until the transaction completes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A I2C_Handle</td></tr>
    <tr><td class="paramname">transaction</td><td>A pointer to an I2C_Transaction. All of the fields within transaction should be considered write only, unless otherwise noted in the driver implementation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>In I2C_MODE_BLOCKING: true for a successful transfer; false for an error (for example, an I2C bus fault (NACK)).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___i2_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga0946727c70387460b4205187afe7fb7f" title="Initialize a given I2C peripheral specified by the particular index value. The parameter specifies wh...">I2C_open</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
