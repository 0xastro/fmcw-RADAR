<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CRC Driver</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CRC Driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The CRC Driver allows the calculation of the CRC on a specified data.</p>
<p>The CRC header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ti/drivers/crc.h&gt;</span></div></div><!-- fragment --><p>The <a class="el" href="reg__crc_8h.html" title="This file gives register definitions of MSS_MCRC module. ">crc/include/reg_crc.h</a> has the register layer definitons for the CRC Module.</p>
<h2>Opening the driver</h2>
<p>Once the CRC Driver has been initialized; the CRC Driver instance can be opened using the <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga32005b9d878ccbb2842a10eae2ed3a08">CRC_open</a>. The helper function <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga007ab6d771e52a08f71ee1453d084c95">CRC_initConfigParams</a> can be used to populate the default parameters</p>
<h2>Transaction Id</h2>
<p>Each driver requires access to a unique transaction identifier before it can start using the driver. Transaction identifiers ensure that if the CRC Driver instance is shared between multiple threads the usage from one thread does not corrupt the usage from another thread.</p>
<p>Use the <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga6114748365421a50ef14cb41daea0d75">CRC_getTransactionId</a> to get a unique transaction identifer. On success the driver is marked as owned and belongs to the callee. The function can fail with an error code CRC_EINUSE to indicate the driver belongs to another enrity and cannot be used right now.</p>
<p>Transaction identifiers are released on a call to <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga88d4bf1f393d3d2d79d5be215d3b1c49">CRC_getSignature</a> when the computed CRC signature is passed back to the callee <em>OR</em> on the <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga72b3958628df966b4c42c6a5a03eb378">CRC_cancelSignature</a> when the callee is no longer interested in calculating the CRC operation.</p>
<h2>Using the driver</h2>
<p>As mentioned above a successful call to <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga6114748365421a50ef14cb41daea0d75">CRC_getTransactionId</a> will return a unique transaction id. Applications can then invoke the <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga60c124387e218aa50f063a2c0e4d265b">CRC_computeSignature</a> API from 1 to N times passing different data buffers over which the CRC is to be computed. The following pseudo code reflects the API usage:-</p>
<div class="fragment"><div class="line"><span class="comment">// Acquire a unique transaction identifer</span></div><div class="line">status = <a class="code" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga6114748365421a50ef14cb41daea0d75">CRC_getTransactionId</a> (crcDriverHandle, &amp;transId, ...)</div><div class="line">if (status == 0)</div><div class="line">{</div><div class="line">    <span class="comment">// Successfully retreived a transaction id. We own the CRC</span></div><div class="line">    <span class="comment">// driver now!</span></div><div class="line"></div><div class="line">    <span class="comment">// Perform signature computation for Data Buffer-1</span></div><div class="line">    sigGenCfg.transactionId = transId;</div><div class="line">    sigGenCfg.ptrData       = &amp;data_buffer1[0];</div><div class="line">    sigGenCfg.dataLen       = 128;</div><div class="line">    <a class="code" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga60c124387e218aa50f063a2c0e4d265b">CRC_computeSignature</a> (crcDriverHandle, )</div><div class="line">    ...</div><div class="line">    <span class="comment">// Perform signature computation for Data Buffer-2</span></div><div class="line">    sigGenCfg.transactionId = transId;</div><div class="line">    sigGenCfg.ptrData       = &amp;data_buffer2[0];</div><div class="line">    sigGenCfg.dataLen       = 512;</div><div class="line">    <a class="code" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga60c124387e218aa50f063a2c0e4d265b">CRC_computeSignature</a> (crcDriverHandle, )</div><div class="line">    ...</div><div class="line">    <span class="comment">// Get the CRC Signature. This will also release the transaction identifer</span></div><div class="line">    <a class="code" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga88d4bf1f393d3d2d79d5be215d3b1c49">CRC_getSignature</a> (crcDriverHandle, transId, &amp;crc, ...)</div><div class="line">}</div></div><!-- fragment --><p>The results of the CRC signature can be retreived using the <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga88d4bf1f393d3d2d79d5be215d3b1c49">CRC_getSignature</a> API. This will also release the transaction identifier and another user of the CRC Driver can start using the driver now.</p>
<p>It is also possible to cancel requests for CRC signature generation by using the <a class="el" href="group___c_r_c___d_r_i_v_e_r___e_x_t_e_r_n_a_l___f_u_n_c_t_i_o_n.html#ga72b3958628df966b4c42c6a5a03eb378">CRC_cancelSignature</a> API. The API will also release the transaction identifer. </p>
</div></div><!-- contents -->
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
